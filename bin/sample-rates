#!/usr/bin/env python

__doc__ = """a simple script to sample the rate parameters given a set of observations and exposure
"""
__author__ = "reed.essick@ligo.org"

#-------------------------------------------------

import numpy as np

import emcee

try: ### Python 2 vs 3 naming differences
    from ConfigParser import ConfigParser
except ImportError:
    from configparser import ConfigParser

from argparse import ArgumentParser

### non-standard libraries
from universality import rates
from universality import utils

#-------------------------------------------------

parser = ArgumentParser(description=__doc__)

parser.add_argument('-v', '--verbose', default=False, action='store_true')

parser.add_argument('config', type=str)

parser.add_argument('num_samples', type=int)
parser.add_argument('num_walkders', type=int)
parser.add_argument('--num-proc', type=int, default=utils.DEFAULT_NUM_PROC)

parser.add_argument('outpath', default=None, type=str)

args = parser.parse_args()

#-------------------------------------------------

if args.verbose:
    print('reading configuration from: '+args.config)
config = ConfigParser()
config.read(args.config)

#-------------------------------------------------

### read in GW data
raise NotImplementedError('''\
need to define a configuration format to let me read in everything I need to set up (GW) observations

for each GW observation set (point to other sections here)
    labels for GW observations
    exposure

for each exposure
    population (pointer to section)
    relevant scalings for that population (ie, parameters to model VT)

for each population
    initial rate
    initial params

for each GW observation
    inpath
    weight_columns
    max_num_samples
    label
    m1      (names)
    m2
    lambda1
    lambda2
''')
